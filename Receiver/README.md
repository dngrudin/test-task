# Receiver

Написать класс с интерфейсом:

```cpp
struct IReceiver
{
	virtual void Receive(const char* data, unsigned int size) = 0;
};
```

На вход которого (через интерфейс IReceiver) блоками различного размера непрерывно поступает поток данных.

Сам поток представляет собой последовательность пакетов двух типов (пакеты идут вперемешку):
1. Если пакет начинается с байта 0x24 (1 байт), то это "бинарный" пакет. За 0x24 следует размер данных пакета в байтах (четырёхбайтовое целое, little endian), а затем сами данные. "Бинарный" пакет нулевого размера возможен.
2. Иначе (если первый байт в пакете не 0x24) пакет текстовый. Текстовый пакет заканчивается на последовательность байт «\r\n\r\n».

Как только обнаружен конец пакета, необходимо данные пакета передать потребителю через callback-интерфейс:

```cpp
struct ICallback
{
	virtual void BinaryPacket(const char* data, unsigned int size) = 0;
	virtual void TextPacket(const char* data, unsigned int size) = 0;
};
```

В обе функции за раз передаётся всё содержимое пакета целиком, без заголовков и «\r\n\r\n».

Данные одного пакета идут в потоке строго последовательно, данные разных пакетов не перемешиваются. Нет никакой привязки блока, поступающего на вход IReceiver к размерам и границам пакетов, на несколько блоков может разделиться в том числе размер бинарного пакета и терминатор текстового.
Класс должен быть как можно эффективнее при следующих условиях: средний поток, подаваемый на вход – 500 Mbit/s, средняя длина блока входных данных – 1024 байт.
